{"version":3,"sources":["../../../../src/public/js/addons/datatables-select.js"],"names":["factory","define","amd","$","window","document","exports","module","root","fn","dataTable","require","jQuery","undefined","DataTable","select","version","init","dt","ctx","settings","oInit","defaults","opts","items","style","blurable","info","selector","className","setStyle","_select","isPlainObject","ext","order","col","api","column","nodes","map","td","parent","hasClass","table","node","cellRange","idx","last","indexes","columnIndexes","rowIndexes","selectColumns","start","end","tmp","record","columns","filter","i","selectRows","rows","search","indexOf","cells","selected","any","row","flatten","deselect","disableMouseSelection","container","off","id","enableMouseSelection","matchSelection","on","e","shiftKey","metaKey","ctrlKey","css","one","getSelection","selection","anchorNode","closest","wrapperClass","oClasses","sWrapper","replace","target","cell","event","Event","eventTrigger","isDefaultPrevented","cellIndex","index","typeSelect","_select_lastCell","parents","length","clear","type","args","unshift","trigger","aanFeatures","add","el","name","num","append","i18n","_","each","output","exisiting","children","remove","text","Api","aoRowCreatedCallback","push","data","ien","d","aoData","_select_selected","addClass","aoColumns","_selected_cells","anCells","sName","ids","eq","cellIdx","rowColumnRange","idx1","inArray","idx2","splice","force","isSelected","prop","o","out","rowData","apiRegister","register","apiRegisterPlural","registerPlural","iterator","flag","context","_select_init","nTr","header","footer","to$","rowIdx","colIdx","removeClass","cellSelected","label","def","namespacedEvents","config","unique","_eventNamespace","enabled","limitTo","_buttonNamespace","extend","buttons","that","enable","disable","destroy","selectedSingle","count","selectAll","action","selectNone","item","lc","toLowerCase","active","namespace"],"mappings":"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","file":"datatables-select.js","sourcesContent":["/*\n * MDBootstrap integration with Datatables\n * Learn more: https://mdbootstrap.com/docs/jquery/tables/datatables/\n * About MDBootstrap: https://mdbootstrap.com/\n *\n * Select for DataTables 1.2.7\n * 2015-2018 SpryMedia Ltd - datatables.net/license/mit\n */\n\n/**\n * @summary     Select for DataTables\n * @description A collection of API methods, events and buttons for DataTables\n *   that provides selection options of the items in a DataTable\n * @version     1.2.7\n * @file        dataTables.select.js\n * @author      SpryMedia Ltd (www.sprymedia.co.uk)\n * @contact     datatables.net/forums\n * @copyright   Copyright 2015-2018 SpryMedia Ltd.\n *\n * This source file is free software, available under the following license:\n *   MIT license - http://datatables.net/license/mit\n *\n * This source file is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.\n *\n * For details please refer to: http://www.datatables.net/extensions/select\n */\n(function( factory ){\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( ['jquery', 'datatables.net'], function ( $ ) {\n\t\t\treturn factory( $, window, document );\n\t\t} );\n\t}\n\telse if ( typeof exports === 'object' ) {\n\t\t// CommonJS\n\t\tmodule.exports = function (root, $) {\n\t\t\tif ( ! root ) {\n\t\t\t\troot = window;\n\t\t\t}\n\n\t\t\tif ( ! $ || ! $.fn.dataTable ) {\n\t\t\t\t$ = require('datatables.net')(root, $).$;\n\t\t\t}\n\n\t\t\treturn factory( $, root, root.document );\n\t\t};\n\t}\n\telse {\n\t\t// Browser\n\t\tfactory( jQuery, window, document );\n\t}\n}(function( $, window, document, undefined ) {\n'use strict';\nvar DataTable = $.fn.dataTable;\n\n\n// Version information for debugger\nDataTable.select = {};\n\nDataTable.select.version = '1.2.7';\n\nDataTable.select.init = function ( dt ) {\n\tvar ctx = dt.settings()[0];\n\tvar init = ctx.oInit.select;\n\tvar defaults = DataTable.defaults.select;\n\tvar opts = init === undefined ?\n\t\tdefaults :\n\t\tinit;\n\n\t// Set defaults\n\tvar items = 'row';\n\tvar style = 'api';\n\tvar blurable = false;\n\tvar info = true;\n\tvar selector = 'td, th';\n\tvar className = 'selected';\n\tvar setStyle = false;\n\n\tctx._select = {};\n\n\t// Initialisation customisations\n\tif ( opts === true ) {\n\t\tstyle = 'os';\n\t\tsetStyle = true;\n\t}\n\telse if ( typeof opts === 'string' ) {\n\t\tstyle = opts;\n\t\tsetStyle = true;\n\t}\n\telse if ( $.isPlainObject( opts ) ) {\n\t\tif ( opts.blurable !== undefined ) {\n\t\t\tblurable = opts.blurable;\n\t\t}\n\n\t\tif ( opts.info !== undefined ) {\n\t\t\tinfo = opts.info;\n\t\t}\n\n\t\tif ( opts.items !== undefined ) {\n\t\t\titems = opts.items;\n\t\t}\n\n\t\tif ( opts.style !== undefined ) {\n\t\t\tstyle = opts.style;\n\t\t\tsetStyle = true;\n\t\t}\n\n\t\tif ( opts.selector !== undefined ) {\n\t\t\tselector = opts.selector;\n\t\t}\n\n\t\tif ( opts.className !== undefined ) {\n\t\t\tclassName = opts.className;\n\t\t}\n\t}\n\n\tdt.select.selector( selector );\n\tdt.select.items( items );\n\tdt.select.style( style );\n\tdt.select.blurable( blurable );\n\tdt.select.info( info );\n\tctx._select.className = className;\n\n\n\t// Sort table based on selected rows. Requires Select Datatables extension\n\t$.fn.dataTable.ext.order['select-checkbox'] = function ( settings, col ) {\n\t\treturn this.api().column( col, {order: 'index'} ).nodes().map( function ( td ) {\n\t\t\tif ( settings._select.items === 'row' ) {\n\t\t\t\treturn $( td ).parent().hasClass( settings._select.className );\n\t\t\t} else if ( settings._select.items === 'cell' ) {\n\t\t\t\treturn $( td ).hasClass( settings._select.className );\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t};\n\n\t// If the init options haven't enabled select, but there is a selectable\n\t// class name, then enable\n\tif ( ! setStyle && $( dt.table().node() ).hasClass( 'selectable' ) ) {\n\t\tdt.select.style( 'os' );\n\t}\n};\n\n/*\n\nSelect is a collection of API methods, event handlers, event emitters and\nbuttons (for the `Buttons` extension) for DataTables. It provides the following\nfeatures, with an overview of how they are implemented:\n\n## Selection of rows, columns and cells. Whether an item is selected or not is\n   stored in:\n\n* rows: a `_select_selected` property which contains a boolean value of the\n  DataTables' `aoData` object for each row\n* columns: a `_select_selected` property which contains a boolean value of the\n  DataTables' `aoColumns` object for each column\n* cells: a `_selected_cells` property which contains an array of boolean values\n  of the `aoData` object for each row. The array is the same length as the\n  columns array, with each element of it representing a cell.\n\nThis method of using boolean flags allows Select to operate when nodes have not\nbeen created for rows / cells (DataTables' defer rendering feature).\n\n## API methods\n\nA range of API methods are available for triggering selection and de-selection\nof rows. Methods are also available to configure the selection events that can\nbe triggered by an end user (such as which items are to be selected). To a large\nextent, these of API methods *is* Select. It is basically a collection of helper\nfunctions that can be used to select items in a DataTable.\n\nConfiguration of select is held in the object `_select` which is attached to the\nDataTables settings object on initialisation. Select being available on a table\nis not optional when Select is loaded, but its default is for selection only to\nbe available via the API - so the end user wouldn't be able to select rows\nwithout additional configuration.\n\nThe `_select` object contains the following properties:\n\n```\n{\n\titems:string     - Can be `rows`, `columns` or `cells`. Defines what item\n\t                   will be selected if the user is allowed to activate row\n\t                   selection using the mouse.\n\tstyle:string     - Can be `none`, `single`, `multi` or `os`. Defines the\n\t                   interaction style when selecting items\n\tblurable:boolean - If row selection can be cleared by clicking outside of\n\t                   the table\n\tinfo:boolean     - If the selection summary should be shown in the table\n\t                   information elements\n}\n```\n\nIn addition to the API methods, Select also extends the DataTables selector\noptions for rows, columns and cells adding a `selected` option to the selector\noptions object, allowing the developer to select only selected items or\nunselected items.\n\n## Mouse selection of items\n\nClicking on items can be used to select items. This is done by a simple event\nhandler that will select the items using the API methods.\n\n */\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * Local functions\n */\n\n/**\n * Add one or more cells to the selection when shift clicking in OS selection\n * style cell selection.\n *\n * Cell range is more complicated than row and column as we want to select\n * in the visible grid rather than by index in sequence. For example, if you\n * click first in cell 1-1 and then shift click in 2-2 - cells 1-2 and 2-1\n * should also be selected (and not 1-3, 1-4. etc)\n *\n * @param  {DataTable.Api} dt   DataTable\n * @param  {object}        idx  Cell index to select to\n * @param  {object}        last Cell index to select from\n * @private\n */\nfunction cellRange( dt, idx, last )\n{\n\tvar indexes;\n\tvar columnIndexes;\n\tvar rowIndexes;\n\tvar selectColumns = function ( start, end ) {\n\t\tif ( start > end ) {\n\t\t\tvar tmp = end;\n\t\t\tend = start;\n\t\t\tstart = tmp;\n\t\t}\n\n\t\tvar record = false;\n\t\treturn dt.columns( ':visible' ).indexes().filter( function (i) {\n\t\t\tif ( i === start ) {\n\t\t\t\trecord = true;\n\t\t\t}\n\n\t\t\tif ( i === end ) { // not else if, as start might === end\n\t\t\t\trecord = false;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn record;\n\t\t} );\n\t};\n\n\tvar selectRows = function ( start, end ) {\n\t\tvar indexes = dt.rows( { search: 'applied' } ).indexes();\n\n\t\t// Which comes first - might need to swap\n\t\tif ( indexes.indexOf( start ) > indexes.indexOf( end ) ) {\n\t\t\tvar tmp = end;\n\t\t\tend = start;\n\t\t\tstart = tmp;\n\t\t}\n\n\t\tvar record = false;\n\t\treturn indexes.filter( function (i) {\n\t\t\tif ( i === start ) {\n\t\t\t\trecord = true;\n\t\t\t}\n\n\t\t\tif ( i === end ) {\n\t\t\t\trecord = false;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn record;\n\t\t} );\n\t};\n\n\tif ( ! dt.cells( { selected: true } ).any() && ! last ) {\n\t\t// select from the top left cell to this one\n\t\tcolumnIndexes = selectColumns( 0, idx.column );\n\t\trowIndexes = selectRows( 0 , idx.row );\n\t}\n\telse {\n\t\t// Get column indexes between old and new\n\t\tcolumnIndexes = selectColumns( last.column, idx.column );\n\t\trowIndexes = selectRows( last.row , idx.row );\n\t}\n\n\tindexes = dt.cells( rowIndexes, columnIndexes ).flatten();\n\n\tif ( ! dt.cells( idx, { selected: true } ).any() ) {\n\t\t// Select range\n\t\tdt.cells( indexes ).select();\n\t}\n\telse {\n\t\t// Deselect range\n\t\tdt.cells( indexes ).deselect();\n\t}\n}\n\n/**\n * Disable mouse selection by removing the selectors\n *\n * @param {DataTable.Api} dt DataTable to remove events from\n * @private\n */\nfunction disableMouseSelection( dt )\n{\n\tvar ctx = dt.settings()[0];\n\tvar selector = ctx._select.selector;\n\n\t$( dt.table().container() )\n\t\t.off( 'mousedown.dtSelect', selector )\n\t\t.off( 'mouseup.dtSelect', selector )\n\t\t.off( 'click.dtSelect', selector );\n\n\t$('body').off( 'click.dtSelect' + dt.table().node().id );\n}\n\n/**\n * Attach mouse listeners to the table to allow mouse selection of items\n *\n * @param {DataTable.Api} dt DataTable to remove events from\n * @private\n */\nfunction enableMouseSelection ( dt )\n{\n\tvar container = $( dt.table().container() );\n\tvar ctx = dt.settings()[0];\n\tvar selector = ctx._select.selector;\n\tvar matchSelection;\n\n\tcontainer\n\t\t.on( 'mousedown.dtSelect', selector, function(e) {\n\t\t\t// Disallow text selection for shift clicking on the table so multi\n\t\t\t// element selection doesn't look terrible!\n\t\t\tif ( e.shiftKey || e.metaKey || e.ctrlKey ) {\n\t\t\t\tcontainer\n\t\t\t\t\t.css( '-moz-user-select', 'none' )\n\t\t\t\t\t.one('selectstart.dtSelect', selector, function () {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( window.getSelection ) {\n\t\t\t\tmatchSelection = window.getSelection();\n\t\t\t}\n\t\t} )\n\t\t.on( 'mouseup.dtSelect', selector, function() {\n\t\t\t// Allow text selection to occur again, Mozilla style (tested in FF\n\t\t\t// 35.0.1 - still required)\n\t\t\tcontainer.css( '-moz-user-select', '' );\n\t\t} )\n\t\t.on( 'click.dtSelect', selector, function ( e ) {\n\t\t\tvar items = dt.select.items();\n\t\t\tvar idx;\n\n\t\t\t// If text was selected (click and drag), then we shouldn't change\n\t\t\t// the row's selected state\n\t\t\tif ( window.getSelection ) {\n\t\t\t\tvar selection = window.getSelection();\n\n\t\t\t\t// If the element that contains the selection is not in the table, we can ignore it\n\t\t\t\t// This can happen if the developer selects text from the click event\n\t\t\t\tif ( ! selection.anchorNode || $(selection.anchorNode).closest('table')[0] === dt.table().node() ) {\n\t\t\t\t\tif ( selection !== matchSelection ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar ctx = dt.settings()[0];\n\t\t\tvar wrapperClass = dt.settings()[0].oClasses.sWrapper.replace(/ /g, '.');\n\n\t\t\t// Ignore clicks inside a sub-table\n\t\t\tif ( $(e.target).closest('div.'+wrapperClass)[0] != dt.table().container() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cell = dt.cell( $(e.target).closest('td, th') );\n\n\t\t\t// Check the cell actually belongs to the host DataTable (so child\n\t\t\t// rows, etc, are ignored)\n\t\t\tif ( ! cell.any() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar event = $.Event('user-select.dt');\n\t\t\teventTrigger( dt, event, [ items, cell, e ] );\n\n\t\t\tif ( event.isDefaultPrevented() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cellIndex = cell.index();\n\t\t\tif ( items === 'row' ) {\n\t\t\t\tidx = cellIndex.row;\n\t\t\t\ttypeSelect( e, dt, ctx, 'row', idx );\n\t\t\t}\n\t\t\telse if ( items === 'column' ) {\n\t\t\t\tidx = cell.index().column;\n\t\t\t\ttypeSelect( e, dt, ctx, 'column', idx );\n\t\t\t}\n\t\t\telse if ( items === 'cell' ) {\n\t\t\t\tidx = cell.index();\n\t\t\t\ttypeSelect( e, dt, ctx, 'cell', idx );\n\t\t\t}\n\n\t\t\tctx._select_lastCell = cellIndex;\n\t\t} );\n\n\t// Blurable\n\t$('body').on( 'click.dtSelect' + dt.table().node().id, function ( e ) {\n\t\tif ( ctx._select.blurable ) {\n\t\t\t// If the click was inside the DataTables container, don't blur\n\t\t\tif ( $(e.target).parents().filter( dt.table().container() ).length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Ignore elements which have been removed from the DOM (i.e. paging\n\t\t\t// buttons)\n\t\t\tif ( $(e.target).parents('html').length === 0 ) {\n\t\t\t \treturn;\n\t\t\t}\n\n\t\t\t// Don't blur in Editor form\n\t\t\tif ( $(e.target).parents('div.DTE').length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclear( ctx, true );\n\t\t}\n\t} );\n}\n\n/**\n * Trigger an event on a DataTable\n *\n * @param {DataTable.Api} api      DataTable to trigger events on\n * @param  {boolean}      selected true if selected, false if deselected\n * @param  {string}       type     Item type acting on\n * @param  {boolean}      any      Require that there are values before\n *     triggering\n * @private\n */\nfunction eventTrigger ( api, type, args, any )\n{\n\tif ( any && ! api.flatten().length ) {\n\t\treturn;\n\t}\n\n\tif ( typeof type === 'string' ) {\n\t\ttype = type +'.dt';\n\t}\n\n\targs.unshift( api );\n\n\t$(api.table().node()).trigger( type, args );\n}\n\n/**\n * Update the information element of the DataTable showing information about the\n * items selected. This is done by adding tags to the existing text\n *\n * @param {DataTable.Api} api DataTable to update\n * @private\n */\nfunction info ( api )\n{\n\tvar ctx = api.settings()[0];\n\n\tif ( ! ctx._select.info || ! ctx.aanFeatures.i ) {\n\t\treturn;\n\t}\n\n\tif ( api.select.style() === 'api' ) {\n\t\treturn;\n\t}\n\n\tvar rows    = api.rows( { selected: true } ).flatten().length;\n\tvar columns = api.columns( { selected: true } ).flatten().length;\n\tvar cells   = api.cells( { selected: true } ).flatten().length;\n\n\tvar add = function ( el, name, num ) {\n\t\tel.append( $('<span class=\"select-item\"/>').append( api.i18n(\n\t\t\t'select.'+name+'s',\n\t\t\t{ _: '%d '+name+'s selected', 0: '', 1: '1 '+name+' selected' },\n\t\t\tnum\n\t\t) ) );\n\t};\n\n\t// Internal knowledge of DataTables to loop over all information elements\n\t$.each( ctx.aanFeatures.i, function ( i, el ) {\n\t\tel = $(el);\n\n\t\tvar output  = $('<span class=\"select-info\"/>');\n\t\tadd( output, 'row', rows );\n\t\tadd( output, 'column', columns );\n\t\tadd( output, 'cell', cells  );\n\n\t\tvar exisiting = el.children('span.select-info');\n\t\tif ( exisiting.length ) {\n\t\t\texisiting.remove();\n\t\t}\n\n\t\tif ( output.text() !== '' ) {\n\t\t\tel.append( output );\n\t\t}\n\t} );\n}\n\n/**\n * Initialisation of a new table. Attach event handlers and callbacks to allow\n * Select to operate correctly.\n *\n * This will occur _after_ the initial DataTables initialisation, although\n * before Ajax data is rendered, if there is ajax data\n *\n * @param  {DataTable.settings} ctx Settings object to operate on\n * @private\n */\nfunction init ( ctx ) {\n\tvar api = new DataTable.Api( ctx );\n\n\t// Row callback so that classes can be added to rows and cells if the item\n\t// was selected before the element was created. This will happen with the\n\t// `deferRender` option enabled.\n\t//\n\t// This method of attaching to `aoRowCreatedCallback` is a hack until\n\t// DataTables has proper events for row manipulation If you are reviewing\n\t// this code to create your own plug-ins, please do not do this!\n\tctx.aoRowCreatedCallback.push( {\n\t\tfn: function ( row, data, index ) {\n\t\t\tvar i, ien;\n\t\t\tvar d = ctx.aoData[ index ];\n\n\t\t\t// Row\n\t\t\tif ( d._select_selected ) {\n\t\t\t\t$( row ).addClass( ctx._select.className );\n\t\t\t}\n\n\t\t\t// Cells and columns - if separated out, we would need to do two\n\t\t\t// loops, so it makes sense to combine them into a single one\n\t\t\tfor ( i=0, ien=ctx.aoColumns.length ; i<ien ; i++ ) {\n\t\t\t\tif ( ctx.aoColumns[i]._select_selected || (d._selected_cells && d._selected_cells[i]) ) {\n\t\t\t\t\t$(d.anCells[i]).addClass( ctx._select.className );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsName: 'select-deferRender'\n\t} );\n\n\t// On Ajax reload we want to reselect all rows which are currently selected,\n\t// if there is an rowId (i.e. a unique value to identify each row with)\n\tapi.on( 'preXhr.dt.dtSelect', function () {\n\t\t// note that column selection doesn't need to be cached and then\n\t\t// reselected, as they are already selected\n\t\tvar rows = api.rows( { selected: true } ).ids( true ).filter( function ( d ) {\n\t\t\treturn d !== undefined;\n\t\t} );\n\n\t\tvar cells = api.cells( { selected: true } ).eq(0).map( function ( cellIdx ) {\n\t\t\tvar id = api.row( cellIdx.row ).id( true );\n\t\t\treturn id ?\n\t\t\t\t{ row: id, column: cellIdx.column } :\n\t\t\t\tundefined;\n\t\t} ).filter( function ( d ) {\n\t\t\treturn d !== undefined;\n\t\t} );\n\n\t\t// On the next draw, reselect the currently selected items\n\t\tapi.one( 'draw.dt.dtSelect', function () {\n\t\t\tapi.rows( rows ).select();\n\n\t\t\t// `cells` is not a cell index selector, so it needs a loop\n\t\t\tif ( cells.any() ) {\n\t\t\t\tcells.each( function ( id ) {\n\t\t\t\t\tapi.cells( id.row, id.column ).select();\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t} );\n\n\t// Update the table information element with selected item summary\n\tapi.on( 'draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt', function () {\n\t\tinfo( api );\n\t} );\n\n\t// Clean up and release\n\tapi.on( 'destroy.dtSelect', function () {\n\t\tdisableMouseSelection( api );\n\t\tapi.off( '.dtSelect' );\n\t} );\n}\n\n/**\n * Add one or more items (rows or columns) to the selection when shift clicking\n * in OS selection style\n *\n * @param  {DataTable.Api} dt   DataTable\n * @param  {string}        type Row or column range selector\n * @param  {object}        idx  Item index to select to\n * @param  {object}        last Item index to select from\n * @private\n */\nfunction rowColumnRange( dt, type, idx, last )\n{\n\t// Add a range of rows from the last selected row to this one\n\tvar indexes = dt[type+'s']( { search: 'applied' } ).indexes();\n\tvar idx1 = $.inArray( last, indexes );\n\tvar idx2 = $.inArray( idx, indexes );\n\n\tif ( ! dt[type+'s']( { selected: true } ).any() && idx1 === -1 ) {\n\t\t// select from top to here - slightly odd, but both Windows and Mac OS\n\t\t// do this\n\t\tindexes.splice( $.inArray( idx, indexes )+1, indexes.length );\n\t}\n\telse {\n\t\t// reverse so we can shift click 'up' as well as down\n\t\tif ( idx1 > idx2 ) {\n\t\t\tvar tmp = idx2;\n\t\t\tidx2 = idx1;\n\t\t\tidx1 = tmp;\n\t\t}\n\n\t\tindexes.splice( idx2+1, indexes.length );\n\t\tindexes.splice( 0, idx1 );\n\t}\n\n\tif ( ! dt[type]( idx, { selected: true } ).any() ) {\n\t\t// Select range\n\t\tdt[type+'s']( indexes ).select();\n\t}\n\telse {\n\t\t// Deselect range - need to keep the clicked on row selected\n\t\tindexes.splice( $.inArray( idx, indexes ), 1 );\n\t\tdt[type+'s']( indexes ).deselect();\n\t}\n}\n\n/**\n * Clear all selected items\n *\n * @param  {DataTable.settings} ctx Settings object of the host DataTable\n * @param  {boolean} [force=false] Force the de-selection to happen, regardless\n *     of selection style\n * @private\n */\nfunction clear( ctx, force )\n{\n\tif ( force || ctx._select.style === 'single' ) {\n\t\tvar api = new DataTable.Api( ctx );\n\n\t\tapi.rows( { selected: true } ).deselect();\n\t\tapi.columns( { selected: true } ).deselect();\n\t\tapi.cells( { selected: true } ).deselect();\n\t}\n}\n\n/**\n * Select items based on the current configuration for style and items.\n *\n * @param  {object}             e    Mouse event object\n * @param  {DataTables.Api}     dt   DataTable\n * @param  {DataTable.settings} ctx  Settings object of the host DataTable\n * @param  {string}             type Items to select\n * @param  {int|object}         idx  Index of the item to select\n * @private\n */\nfunction typeSelect ( e, dt, ctx, type, idx )\n{\n\tvar style = dt.select.style();\n\tvar isSelected = dt[type]( idx, { selected: true } ).any();\n\n\tif ( style === 'os' ) {\n\t\tif ( e.ctrlKey || e.metaKey ) {\n\t\t\t// Add or remove from the selection\n\t\t\tdt[type]( idx ).select( ! isSelected );\n\t\t}\n\t\telse if ( e.shiftKey ) {\n\t\t\tif ( type === 'cell' ) {\n\t\t\t\tcellRange( dt, idx, ctx._select_lastCell || null );\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowColumnRange( dt, type, idx, ctx._select_lastCell ?\n\t\t\t\t\tctx._select_lastCell[type] :\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// No cmd or shift click - deselect if selected, or select\n\t\t\t// this row only\n\t\t\tvar selected = dt[type+'s']( { selected: true } );\n\n\t\t\tif ( isSelected && selected.flatten().length === 1 ) {\n\t\t\t\tdt[type]( idx ).deselect();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tselected.deselect();\n\t\t\t\tdt[type]( idx ).select();\n\t\t\t}\n\t\t}\n\t} else if ( style == 'multi+shift' ) {\n\t\tif ( e.shiftKey ) {\n\t\t\tif ( type === 'cell' ) {\n\t\t\t\tcellRange( dt, idx, ctx._select_lastCell || null );\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowColumnRange( dt, type, idx, ctx._select_lastCell ?\n\t\t\t\t\tctx._select_lastCell[type] :\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdt[ type ]( idx ).select( ! isSelected );\n\t\t}\n\t}\n\telse {\n\t\tdt[ type ]( idx ).select( ! isSelected );\n\t}\n}\n\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables selectors\n */\n\n// row and column are basically identical just assigned to different properties\n// and checking a different array, so we can dynamically create the functions to\n// reduce the code size\n$.each( [\n\t{ type: 'row', prop: 'aoData' },\n\t{ type: 'column', prop: 'aoColumns' }\n], function ( i, o ) {\n\tDataTable.ext.selector[ o.type ].push( function ( settings, opts, indexes ) {\n\t\tvar selected = opts.selected;\n\t\tvar data;\n\t\tvar out = [];\n\n\t\tif ( selected !== true && selected !== false ) {\n\t\t\treturn indexes;\n\t\t}\n\n\t\tfor ( var i=0, ien=indexes.length ; i<ien ; i++ ) {\n\t\t\tdata = settings[ o.prop ][ indexes[i] ];\n\n\t\t\tif ( (selected === true && data._select_selected === true) ||\n\t\t\t     (selected === false && ! data._select_selected )\n\t\t\t) {\n\t\t\t\tout.push( indexes[i] );\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t} );\n} );\n\nDataTable.ext.selector.cell.push( function ( settings, opts, cells ) {\n\tvar selected = opts.selected;\n\tvar rowData;\n\tvar out = [];\n\n\tif ( selected === undefined ) {\n\t\treturn cells;\n\t}\n\n\tfor ( var i=0, ien=cells.length ; i<ien ; i++ ) {\n\t\trowData = settings.aoData[ cells[i].row ];\n\n\t\tif ( (selected === true && rowData._selected_cells && rowData._selected_cells[ cells[i].column ] === true) ||\n\t\t     (selected === false && ( ! rowData._selected_cells || ! rowData._selected_cells[ cells[i].column ] ) )\n\t\t) {\n\t\t\tout.push( cells[i] );\n\t\t}\n\t}\n\n\treturn out;\n} );\n\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables API\n *\n * For complete documentation, please refer to the docs/api directory or the\n * DataTables site\n */\n\n// Local variables to improve compression\nvar apiRegister = DataTable.Api.register;\nvar apiRegisterPlural = DataTable.Api.registerPlural;\n\napiRegister( 'select()', function () {\n\treturn this.iterator( 'table', function ( ctx ) {\n\t\tDataTable.select.init( new DataTable.Api( ctx ) );\n\t} );\n} );\n\napiRegister( 'select.blurable()', function ( flag ) {\n\tif ( flag === undefined ) {\n\t\treturn this.context[0]._select.blurable;\n\t}\n\n\treturn this.iterator( 'table', function ( ctx ) {\n\t\tctx._select.blurable = flag;\n\t} );\n} );\n\napiRegister( 'select.info()', function ( flag ) {\n\tif ( info === undefined ) {\n\t\treturn this.context[0]._select.info;\n\t}\n\n\treturn this.iterator( 'table', function ( ctx ) {\n\t\tctx._select.info = flag;\n\t} );\n} );\n\napiRegister( 'select.items()', function ( items ) {\n\tif ( items === undefined ) {\n\t\treturn this.context[0]._select.items;\n\t}\n\n\treturn this.iterator( 'table', function ( ctx ) {\n\t\tctx._select.items = items;\n\n\t\teventTrigger( new DataTable.Api( ctx ), 'selectItems', [ items ] );\n\t} );\n} );\n\n// Takes effect from the _next_ selection. None disables future selection, but\n// does not clear the current selection. Use the `deselect` methods for that\napiRegister( 'select.style()', function ( style ) {\n\tif ( style === undefined ) {\n\t\treturn this.context[0]._select.style;\n\t}\n\n\treturn this.iterator( 'table', function ( ctx ) {\n\t\tctx._select.style = style;\n\n\t\tif ( ! ctx._select_init ) {\n\t\t\tinit( ctx );\n\t\t}\n\n\t\t// Add / remove mouse event handlers. They aren't required when only\n\t\t// API selection is available\n\t\tvar dt = new DataTable.Api( ctx );\n\t\tdisableMouseSelection( dt );\n\n\t\tif ( style !== 'api' ) {\n\t\t\tenableMouseSelection( dt );\n\t\t}\n\n\t\teventTrigger( new DataTable.Api( ctx ), 'selectStyle', [ style ] );\n\t} );\n} );\n\napiRegister( 'select.selector()', function ( selector ) {\n\tif ( selector === undefined ) {\n\t\treturn this.context[0]._select.selector;\n\t}\n\n\treturn this.iterator( 'table', function ( ctx ) {\n\t\tdisableMouseSelection( new DataTable.Api( ctx ) );\n\n\t\tctx._select.selector = selector;\n\n\t\tif ( ctx._select.style !== 'api' ) {\n\t\t\tenableMouseSelection( new DataTable.Api( ctx ) );\n\t\t}\n\t} );\n} );\n\n\n\napiRegisterPlural( 'rows().select()', 'row().select()', function ( select ) {\n\tvar api = this;\n\n\tif ( select === false ) {\n\t\treturn this.deselect();\n\t}\n\n\tthis.iterator( 'row', function ( ctx, idx ) {\n\t\tclear( ctx );\n\n\t\tctx.aoData[ idx ]._select_selected = true;\n\t\t$( ctx.aoData[ idx ].nTr ).addClass( ctx._select.className );\n\t} );\n\n\tthis.iterator( 'table', function ( ctx, i ) {\n\t\teventTrigger( api, 'select', [ 'row', api[i] ], true );\n\t} );\n\n\treturn this;\n} );\n\napiRegisterPlural( 'columns().select()', 'column().select()', function ( select ) {\n\tvar api = this;\n\n\tif ( select === false ) {\n\t\treturn this.deselect();\n\t}\n\n\tthis.iterator( 'column', function ( ctx, idx ) {\n\t\tclear( ctx );\n\n\t\tctx.aoColumns[ idx ]._select_selected = true;\n\n\t\tvar column = new DataTable.Api( ctx ).column( idx );\n\n\t\t$( column.header() ).addClass( ctx._select.className );\n\t\t$( column.footer() ).addClass( ctx._select.className );\n\n\t\tcolumn.nodes().to$().addClass( ctx._select.className );\n\t} );\n\n\tthis.iterator( 'table', function ( ctx, i ) {\n\t\teventTrigger( api, 'select', [ 'column', api[i] ], true );\n\t} );\n\n\treturn this;\n} );\n\napiRegisterPlural( 'cells().select()', 'cell().select()', function ( select ) {\n\tvar api = this;\n\n\tif ( select === false ) {\n\t\treturn this.deselect();\n\t}\n\n\tthis.iterator( 'cell', function ( ctx, rowIdx, colIdx ) {\n\t\tclear( ctx );\n\n\t\tvar data = ctx.aoData[ rowIdx ];\n\n\t\tif ( data._selected_cells === undefined ) {\n\t\t\tdata._selected_cells = [];\n\t\t}\n\n\t\tdata._selected_cells[ colIdx ] = true;\n\n\t\tif ( data.anCells ) {\n\t\t\t$( data.anCells[ colIdx ] ).addClass( ctx._select.className );\n\t\t}\n\t} );\n\n\tthis.iterator( 'table', function ( ctx, i ) {\n\t\teventTrigger( api, 'select', [ 'cell', api[i] ], true );\n\t} );\n\n\treturn this;\n} );\n\n\napiRegisterPlural( 'rows().deselect()', 'row().deselect()', function () {\n\tvar api = this;\n\n\tthis.iterator( 'row', function ( ctx, idx ) {\n\t\tctx.aoData[ idx ]._select_selected = false;\n\t\t$( ctx.aoData[ idx ].nTr ).removeClass( ctx._select.className );\n\t} );\n\n\tthis.iterator( 'table', function ( ctx, i ) {\n\t\teventTrigger( api, 'deselect', [ 'row', api[i] ], true );\n\t} );\n\n\treturn this;\n} );\n\napiRegisterPlural( 'columns().deselect()', 'column().deselect()', function () {\n\tvar api = this;\n\n\tthis.iterator( 'column', function ( ctx, idx ) {\n\t\tctx.aoColumns[ idx ]._select_selected = false;\n\n\t\tvar api = new DataTable.Api( ctx );\n\t\tvar column = api.column( idx );\n\n\t\t$( column.header() ).removeClass( ctx._select.className );\n\t\t$( column.footer() ).removeClass( ctx._select.className );\n\n\t\t// Need to loop over each cell, rather than just using\n\t\t// `column().nodes()` as cells which are individually selected should\n\t\t// not have the `selected` class removed from them\n\t\tapi.cells( null, idx ).indexes().each( function (cellIdx) {\n\t\t\tvar data = ctx.aoData[ cellIdx.row ];\n\t\t\tvar cellSelected = data._selected_cells;\n\n\t\t\tif ( data.anCells && (! cellSelected || ! cellSelected[ cellIdx.column ]) ) {\n\t\t\t\t$( data.anCells[ cellIdx.column  ] ).removeClass( ctx._select.className );\n\t\t\t}\n\t\t} );\n\t} );\n\n\tthis.iterator( 'table', function ( ctx, i ) {\n\t\teventTrigger( api, 'deselect', [ 'column', api[i] ], true );\n\t} );\n\n\treturn this;\n} );\n\napiRegisterPlural( 'cells().deselect()', 'cell().deselect()', function () {\n\tvar api = this;\n\n\tthis.iterator( 'cell', function ( ctx, rowIdx, colIdx ) {\n\t\tvar data = ctx.aoData[ rowIdx ];\n\n\t\tdata._selected_cells[ colIdx ] = false;\n\n\t\t// Remove class only if the cells exist, and the cell is not column\n\t\t// selected, in which case the class should remain (since it is selected\n\t\t// in the column)\n\t\tif ( data.anCells && ! ctx.aoColumns[ colIdx ]._select_selected ) {\n\t\t\t$( data.anCells[ colIdx ] ).removeClass( ctx._select.className );\n\t\t}\n\t} );\n\n\tthis.iterator( 'table', function ( ctx, i ) {\n\t\teventTrigger( api, 'deselect', [ 'cell', api[i] ], true );\n\t} );\n\n\treturn this;\n} );\n\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * Buttons\n */\nfunction i18n( label, def ) {\n\treturn function (dt) {\n\t\treturn dt.i18n( 'buttons.'+label, def );\n\t};\n}\n\n// Common events with suitable namespaces\nfunction namespacedEvents ( config ) {\n\tvar unique = config._eventNamespace;\n\n\treturn 'draw.dt.DT'+unique+' select.dt.DT'+unique+' deselect.dt.DT'+unique;\n}\n\nfunction enabled ( dt, config ) {\n\tif ( $.inArray( 'rows', config.limitTo ) !== -1 && dt.rows( { selected: true } ).any() ) {\n\t\treturn true;\n\t}\n\n\tif ( $.inArray( 'columns', config.limitTo ) !== -1 && dt.columns( { selected: true } ).any() ) {\n\t\treturn true;\n\t}\n\n\tif ( $.inArray( 'cells', config.limitTo ) !== -1 && dt.cells( { selected: true } ).any() ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nvar _buttonNamespace = 0;\n\n$.extend( DataTable.ext.buttons, {\n\tselected: {\n\t\ttext: i18n( 'selected', 'Selected' ),\n\t\tclassName: 'buttons-selected',\n\t\tlimitTo: [ 'rows', 'columns', 'cells' ],\n\t\tinit: function ( dt, node, config ) {\n\t\t\tvar that = this;\n\t\t\tconfig._eventNamespace = '.select'+(_buttonNamespace++);\n\n\t\t\t// .DT namespace listeners are removed by DataTables automatically\n\t\t\t// on table destroy\n\t\t\tdt.on( namespacedEvents(config), function () {\n\t\t\t\tthat.enable( enabled(dt, config) );\n\t\t\t} );\n\n\t\t\tthis.disable();\n\t\t},\n\t\tdestroy: function ( dt, node, config ) {\n\t\t\tdt.off( config._eventNamespace );\n\t\t}\n\t},\n\tselectedSingle: {\n\t\ttext: i18n( 'selectedSingle', 'Selected single' ),\n\t\tclassName: 'buttons-selected-single',\n\t\tinit: function ( dt, node, config ) {\n\t\t\tvar that = this;\n\t\t\tconfig._eventNamespace = '.select'+(_buttonNamespace++);\n\n\t\t\tdt.on( namespacedEvents(config), function () {\n\t\t\t\tvar count = dt.rows( { selected: true } ).flatten().length +\n\t\t\t\t            dt.columns( { selected: true } ).flatten().length +\n\t\t\t\t            dt.cells( { selected: true } ).flatten().length;\n\n\t\t\t\tthat.enable( count === 1 );\n\t\t\t} );\n\n\t\t\tthis.disable();\n\t\t},\n\t\tdestroy: function ( dt, node, config ) {\n\t\t\tdt.off( config._eventNamespace );\n\t\t}\n\t},\n\tselectAll: {\n\t\ttext: i18n( 'selectAll', 'Select all' ),\n\t\tclassName: 'buttons-select-all',\n\t\taction: function () {\n\t\t\tvar items = this.select.items();\n\t\t\tthis[ items+'s' ]().select();\n\t\t}\n\t},\n\tselectNone: {\n\t\ttext: i18n( 'selectNone', 'Deselect all' ),\n\t\tclassName: 'buttons-select-none',\n\t\taction: function () {\n\t\t\tclear( this.settings()[0], true );\n\t\t},\n\t\tinit: function ( dt, node, config ) {\n\t\t\tvar that = this;\n\t\t\tconfig._eventNamespace = '.select'+(_buttonNamespace++);\n\n\t\t\tdt.on( namespacedEvents(config), function () {\n\t\t\t\tvar count = dt.rows( { selected: true } ).flatten().length +\n\t\t\t\t            dt.columns( { selected: true } ).flatten().length +\n\t\t\t\t            dt.cells( { selected: true } ).flatten().length;\n\n\t\t\t\tthat.enable( count > 0 );\n\t\t\t} );\n\n\t\t\tthis.disable();\n\t\t},\n\t\tdestroy: function ( dt, node, config ) {\n\t\t\tdt.off( config._eventNamespace );\n\t\t}\n\t}\n} );\n\n$.each( [ 'Row', 'Column', 'Cell' ], function ( i, item ) {\n\tvar lc = item.toLowerCase();\n\n\tDataTable.ext.buttons[ 'select'+item+'s' ] = {\n\t\ttext: i18n( 'select'+item+'s', 'Select '+lc+'s' ),\n\t\tclassName: 'buttons-select-'+lc+'s',\n\t\taction: function () {\n\t\t\tthis.select.items( lc );\n\t\t},\n\t\tinit: function ( dt ) {\n\t\t\tvar that = this;\n\n\t\t\tdt.on( 'selectItems.dt.DT', function ( e, ctx, items ) {\n\t\t\t\tthat.active( items === lc );\n\t\t\t} );\n\t\t}\n\t};\n} );\n\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * Initialisation\n */\n\n// DataTables creation - check if select has been defined in the options. Note\n// this required that the table be in the document! If it isn't then something\n// needs to trigger this method unfortunately. The next major release of\n// DataTables will rework the events and address this.\n$(document).on( 'preInit.dt.dtSelect', function (e, ctx) {\n\tif ( e.namespace !== 'dt' ) {\n\t\treturn;\n\t}\n\n\tDataTable.select.init( new DataTable.Api( ctx ) );\n} );\n\n\nreturn DataTable.select;\n}));\n"]}